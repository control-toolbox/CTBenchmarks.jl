<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Add a Custom Profile · CTBenchmarks</title><meta name="title" content="Add a Custom Profile · CTBenchmarks"/><meta property="og:title" content="Add a Custom Profile · CTBenchmarks"/><meta property="twitter:title" content="Add a Custom Profile · CTBenchmarks"/><meta name="description" content="Documentation for CTBenchmarks."/><meta property="og:description" content="Documentation for CTBenchmarks."/><meta property="twitter:description" content="Documentation for CTBenchmarks."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="https://control-toolbox.org/assets/css/documentation.css" rel="stylesheet" type="text/css"/><script src="https://control-toolbox.org/assets/js/documentation.js"></script><script src="assets/js/ctbenchmarks-details.js"></script><link href="assets/css/ctbenchmarks-details.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">CTBenchmarks</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><a class="tocitem" href="performance_profile.html">Performance Profile</a></li><li><span class="tocitem">Core benchmarks</span><ul><li><a class="tocitem" href="core/cpu.html">CPU</a></li><li><a class="tocitem" href="core/gpu.html">GPU</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Problems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="core/problems/beam.html">beam</a></li><li><a class="tocitem" href="core/problems/chain.html">chain</a></li><li><a class="tocitem" href="core/problems/double_oscillator.html">double_oscillator</a></li><li><a class="tocitem" href="core/problems/electric_vehicle.html">electric_vehicle</a></li><li><a class="tocitem" href="core/problems/glider.html">glider</a></li><li><a class="tocitem" href="core/problems/insurance.html">insurance</a></li><li><a class="tocitem" href="core/problems/jackson.html">jackson</a></li><li><a class="tocitem" href="core/problems/robbins.html">robbins</a></li><li><a class="tocitem" href="core/problems/robot.html">robot</a></li><li><a class="tocitem" href="core/problems/rocket.html">rocket</a></li><li><a class="tocitem" href="core/problems/space_shuttle.html">space_shuttle</a></li><li><a class="tocitem" href="core/problems/steering.html">steering</a></li><li><a class="tocitem" href="core/problems/vanderpol.html">vanderpol</a></li></ul></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="api/public.html">Public</a></li><li><a class="tocitem" href="api/private.html">Private</a></li></ul></li><li><span class="tocitem">Developers Guidelines</span><ul><li><a class="tocitem" href="add_benchmark.html">Add a New Benchmark</a></li><li class="is-active"><a class="tocitem" href="add_performance_profile.html">Add a Custom Profile</a><ul class="internal"><li><a class="tocitem" href="#The-Profile-Registry"><span>The Profile Registry</span></a></li><li><a class="tocitem" href="#Defining-a-Profile"><span>Defining a Profile</span></a></li><li><a class="tocitem" href="#How-to-Register-a-New-Profile"><span>How to Register a New Profile</span></a></li><li><a class="tocitem" href="#Using-Custom-Profiles-in-Templates"><span>Using Custom Profiles in Templates</span></a></li></ul></li><li><a class="tocitem" href="developers/docutils_templates.html">DocUtils Template System</a></li><li><a class="tocitem" href="documentation_process.html">Documentation Process</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developers Guidelines</a></li><li class="is-active"><a href="add_performance_profile.html">Add a Custom Profile</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="add_performance_profile.html">Add a Custom Profile</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/control-toolbox/CTBenchmarks.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Custom-Performance-Profiles"><a class="docs-heading-anchor" href="#Custom-Performance-Profiles">Custom Performance Profiles</a><a id="Custom-Performance-Profiles-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Performance-Profiles" title="Permalink"></a></h1><p>Performance profiles in CTBenchmarks.jl are used to compare the relative efficiency and robustness of different solver-model combinations. While default profiles for CPU time and iterations are provided, you can easily define custom profiles for any metric extracted from the benchmark results (e.g., objective error, constraint violations, etc.).</p><h2 id="The-Profile-Registry"><a class="docs-heading-anchor" href="#The-Profile-Registry">The Profile Registry</a><a id="The-Profile-Registry-1"></a><a class="docs-heading-anchor-permalink" href="#The-Profile-Registry" title="Permalink"></a></h2><p>The documentation system uses a global <strong>Performance Profile Registry</strong> to manage these configurations. Registering a profile once allows you to use it across any documentation template using a simple declarative syntax.</p><p>The registry is defined in <code>docs/src/docutils/ProfileRegistry.jl</code>.</p><h2 id="Defining-a-Profile"><a class="docs-heading-anchor" href="#Defining-a-Profile">Defining a Profile</a><a id="Defining-a-Profile-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-a-Profile" title="Permalink"></a></h2><p>Adding a custom profile involves two main components: a <strong>Criterion</strong> and a <strong>Configuration</strong>.</p><h3 id="1.-Profile-Criterion-(ProfileCriterion)"><a class="docs-heading-anchor" href="#1.-Profile-Criterion-(ProfileCriterion)">1. Profile Criterion (<code>ProfileCriterion</code>)</a><a id="1.-Profile-Criterion-(ProfileCriterion)-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Profile-Criterion-(ProfileCriterion)" title="Permalink"></a></h3><p>The criterion defines what metric is measured and how to compare values.</p><pre><code class="language-julia hljs">criterion = ProfileCriterion{T}(
    name,    # Display name (e.g., &quot;Objective Error&quot;)
    value,   # Function (row -&gt; value) to extract the metric
    better   # Function (a, b -&gt; Bool) returning true if a is better than b
)</code></pre><p><strong>Example: Objective Error</strong></p><pre><code class="language-julia hljs">obj_criterion = CTBenchmarks.ProfileCriterion{Float64}(
    &quot;Objective Error&quot;,
    row -&gt; abs(row.objective - row.reference_objective),
    (a, b) -&gt; a &lt;= b  # Smaller error is better
)</code></pre><h3 id="2.-Profile-Configuration-(PerformanceProfileConfig)"><a class="docs-heading-anchor" href="#2.-Profile-Configuration-(PerformanceProfileConfig)">2. Profile Configuration (<code>PerformanceProfileConfig</code>)</a><a id="2.-Profile-Configuration-(PerformanceProfileConfig)-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Profile-Configuration-(PerformanceProfileConfig)" title="Permalink"></a></h3><p>The configuration defines how to group benchmark results into &quot;instances&quot; and &quot;solvers&quot;, and how to handle multiple runs.</p><pre><code class="language-julia hljs">config = PerformanceProfileConfig{T}(
    instance_cols, # Cols defining a problem (e.g., [:problem, :grid_size])
    solver_cols,   # Cols defining a solver (e.g., [:model, :solver])
    criterion,     # The ProfileCriterion to use
    is_success,    # Function (row -&gt; Bool) to filter successful runs
    row_filter,    # Function (row -&gt; Bool) for additional filtering
    aggregate      # Function (xs -&gt; value) to aggregate multiple runs
)</code></pre><hr/><h2 id="How-to-Register-a-New-Profile"><a class="docs-heading-anchor" href="#How-to-Register-a-New-Profile">How to Register a New Profile</a><a id="How-to-Register-a-New-Profile-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-Register-a-New-Profile" title="Permalink"></a></h2><p>To make a profile available globally in the documentation:</p><ol><li>Open <code>docs/src/docutils/ProfileRegistry.jl</code>.</li><li>Add your registration logic inside the <code>init_default_profiles!()</code> function or create a similar initialization step.</li></ol><p><strong>Example Implementation:</strong></p><pre><code class="language-julia hljs">function init_custom_profiles!()
    # Define the criterion
    error_criterion = CTBenchmarks.ProfileCriterion{Float64}(
        &quot;Constraint Violation&quot;,
        row -&gt; get(row, :constraint_violation, NaN),
        (a, b) -&gt; a &lt;= b
    )

    # Define the configuration
    error_config = CTBenchmarks.PerformanceProfileConfig{Float64}(
        [:problem, :grid_size],
        [:model, :solver],
        error_criterion,
        row -&gt; row.success == true,
        row -&gt; true,
        xs -&gt; Statistics.mean(skipmissing(xs))
    )

    # Register it under a unique name
    CTBenchmarks.register!(PROFILE_REGISTRY, &quot;constraint_error&quot;, error_config)
end</code></pre><hr/><h2 id="Using-Custom-Profiles-in-Templates"><a class="docs-heading-anchor" href="#Using-Custom-Profiles-in-Templates">Using Custom Profiles in Templates</a><a id="Using-Custom-Profiles-in-Templates-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Custom-Profiles-in-Templates" title="Permalink"></a></h2><p>Once a profile (e.g., <code>&quot;constraint_error&quot;</code>) is registered, you can use it in your <code>.md.template</code> files with the specialized block syntax:</p><h3 id="Plotting-the-Profile"><a class="docs-heading-anchor" href="#Plotting-the-Profile">Plotting the Profile</a><a id="Plotting-the-Profile-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-the-Profile" title="Permalink"></a></h3><pre><code class="language-markdown hljs">&lt;!-- PROFILE_PLOT:
NAME = constraint_error
BENCH_ID = core-ubuntu-latest
--&gt;</code></pre><h3 id="Textual-Analysis"><a class="docs-heading-anchor" href="#Textual-Analysis">Textual Analysis</a><a id="Textual-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Textual-Analysis" title="Permalink"></a></h3><pre><code class="language-markdown hljs">&lt;!-- PROFILE_ANALYSIS:
NAME = constraint_error
BENCH_ID = core-ubuntu-latest
--&gt;</code></pre><h3 id="Restricting-Solver-Combinations"><a class="docs-heading-anchor" href="#Restricting-Solver-Combinations">Restricting Solver Combinations</a><a id="Restricting-Solver-Combinations-1"></a><a class="docs-heading-anchor-permalink" href="#Restricting-Solver-Combinations" title="Permalink"></a></h3><p>You can use the <code>COMBOS</code> parameter to focus on specific solvers:</p><pre><code class="language-markdown hljs">&lt;!-- PROFILE_PLOT:
NAME = constraint_error
BENCH_ID = core-ubuntu-latest
COMBOS = exa:ipopt, exa:madnlp
--&gt;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="add_benchmark.html">« Add a New Benchmark</a><a class="docs-footer-nextpage" href="developers/docutils_templates.html">DocUtils Template System »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 9 January 2026 14:33">Friday 9 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
